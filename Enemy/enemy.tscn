[gd_scene load_steps=12 format=3 uid="uid://dtljdkolleihi"]

[ext_resource type="Script" uid="uid://cxkrxpdtltjh" path="res://Enemy/enemy.gd" id="1_2pb1h"]
[ext_resource type="PackedScene" uid="uid://cucid3eir3dv7" path="res://Assets/3D_Assets/Character/Gear/Tall_Shield.glb" id="2_m6jha"]
[ext_resource type="PackedScene" uid="uid://ch1vyjkdj16m8" path="res://Player/rig.tscn" id="2_px1sc"]
[ext_resource type="PackedScene" uid="uid://kha3rtcnssdw" path="res://Player/health_component.tscn" id="3_am0pq"]
[ext_resource type="PackedScene" uid="uid://cucy6cmf83ctc" path="res://Player/area_attack.tscn" id="3_eqilm"]
[ext_resource type="PackedScene" uid="uid://cs7sb3u6ajmk2" path="res://Assets/3D_Assets/Character/Gear/Short_Shield.glb" id="3_glvfu"]
[ext_resource type="PackedScene" uid="uid://s0wtyf8j8k6t" path="res://Assets/3D_Assets/Character/Gear/Battleaxe.glb" id="4_efk13"]
[ext_resource type="PackedScene" uid="uid://bxn6bhdnn235t" path="res://Assets/3D_Assets/Character/Gear/Broken_Sword.glb" id="5_nmr1a"]
[ext_resource type="PackedScene" uid="uid://ed6lkk7a11iy" path="res://Assets/3D_Assets/Character/Gear/Longsword.glb" id="6_47ove"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_am0pq"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_eqilm"]

[node name="Enemy" type="CharacterBody3D"]
collision_layer = 9
script = ExtResource("1_2pb1h")
shields = Array[PackedScene]([ExtResource("2_m6jha"), ExtResource("3_glvfu")])
weapons = Array[PackedScene]([ExtResource("4_efk13"), ExtResource("5_nmr1a"), ExtResource("6_47ove")])

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
avoidance_enabled = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_am0pq")

[node name="Rig" parent="." instance=ExtResource("2_px1sc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="Skeleton3D" parent="Rig/CharacterRig/GameRig" index="0"]
bones/0/position = Vector3(3.3750775e-15, 0.89198625, -0.04817356)
bones/2/rotation = Quaternion(-0.004416742, -0.00045781367, 0.003215642, 0.99998504)
bones/3/rotation = Quaternion(-0.099418364, -0.00041811433, 0.008518033, 0.99500924)
bones/4/rotation = Quaternion(0.27884594, 1.43146455e-08, 9.5708955e-08, 0.9603359)
bones/6/rotation = Quaternion(-0.1537227, -1.1781265e-07, -1.8182815e-08, 0.9881141)
bones/7/position = Vector3(-3.154454e-08, 0.89198613, -0.048173472)
bones/8/position = Vector3(-5.0111456e-08, 0.8919862, -0.048173502)
bones/9/position = Vector3(0.13114367, 0.95819044, -0.035129093)
bones/9/rotation = Quaternion(0.9924861, 0.021136204, -0.030825922, 0.116509505)
bones/11/rotation = Quaternion(0.43157485, -0.00070055644, 0.00033529376, 0.9020768)
bones/13/rotation = Quaternion(-0.7566756, 0.011904297, 0.024432108, 0.65322536)
bones/15/position = Vector3(-0.13114369, 0.9581905, -0.035129108)
bones/15/rotation = Quaternion(0.97215444, -0.0059765666, 0.027186772, 0.23268215)
bones/17/rotation = Quaternion(0.4549064, 0.003354534, -0.001713674, 0.89053136)
bones/19/rotation = Quaternion(-0.6920981, -0.028213218, -0.00045337866, 0.72125185)
bones/21/position = Vector3(0.025128616, 1.4232287, 0.040901724)
bones/21/rotation = Quaternion(-0.501562, -0.25450772, -0.39403132, 0.7269117)
bones/22/position = Vector3(0.18743168, 1.458721, -0.028583603)
bones/22/rotation = Quaternion(0.060452446, -0.15805273, 0.9738418, -0.1516478)
bones/23/rotation = Quaternion(7.736617e-08, -0.008008818, -1.9865817e-08, 0.99996793)
bones/24/rotation = Quaternion(0.27783883, -0.0067530507, -0.016610984, 0.9604604)
bones/46/position = Vector3(-0.011363527, 1.4232287, 0.04090171)
bones/46/rotation = Quaternion(-0.5279167, 0.2017535, 0.35752112, 0.7434905)
bones/47/position = Vector3(-0.16207092, 1.4580616, -0.0513641)
bones/47/rotation = Quaternion(-0.10180442, -0.13218082, 0.97078973, 0.17242788)
bones/48/rotation = Quaternion(-3.805282e-08, -0.0045187282, -5.103132e-08, 0.99998987)
bones/49/rotation = Quaternion(0.30748332, -0.004627261, 0.028492106, 0.9511156)
bones/71/position = Vector3(0.12719111, 1.3402747, -0.026997995)
bones/71/rotation = Quaternion(1.8924533e-08, 0.6186337, 0.7856796, -4.662333e-08)
bones/72/position = Vector3(-0.113425955, 1.3402747, -0.02699802)
bones/72/rotation = Quaternion(1.8924577e-08, 0.6186337, 0.7856796, -4.662327e-08)

[node name="Knight_02" parent="Rig/CharacterRig/GameRig/Skeleton3D" index="1"]
visible = false

[node name="Villager_01" parent="Rig/CharacterRig/GameRig/Skeleton3D" index="2"]
visible = true

[node name="RightHandBone" parent="Rig" index="2"]
transform = Transform3D(-0.962306, -0.27091852, -0.023882303, 0.24748917, -0.9087161, 0.33613205, -0.11276661, 0.31755134, 0.94151187, -0.3359173, 0.9715411, -0.05242693)

[node name="LeftHandBone" parent="Rig" index="3"]
transform = Transform3D(-0.9703352, 0.23970748, 0.031473137, -0.22604433, -0.9456962, 0.23358749, 0.08575672, 0.21954384, 0.97182614, 0.34439573, 0.9624379, -0.06393076)

[node name="PlayerDetector" type="ShapeCast3D" parent="Rig"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_eqilm")
target_position = Vector3(0, 0, 1)
collision_mask = 4

[node name="AreaAttack" parent="Rig" instance=ExtResource("3_eqilm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
target_position = Vector3(0, 1, 1)
collision_mask = 4

[node name="HealthComponent" parent="." node_paths=PackedStringArray("body") instance=ExtResource("3_am0pq")]
body = NodePath("..")

[connection signal="velocity_computed" from="NavigationAgent3D" to="." method="_on_navigation_agent_3d_velocity_computed"]
[connection signal="heavy_attack" from="Rig" to="." method="_on_rig_heavy_attack"]
[connection signal="defeat" from="HealthComponent" to="." method="_on_health_component_defeat"]

[editable path="Rig"]
[editable path="Rig/CharacterRig"]
