[gd_scene load_steps=7 format=3 uid="uid://dtljdkolleihi"]

[ext_resource type="Script" uid="uid://cxkrxpdtltjh" path="res://Enemy/enemy.gd" id="1_2pb1h"]
[ext_resource type="PackedScene" uid="uid://ch1vyjkdj16m8" path="res://Player/rig.tscn" id="2_px1sc"]
[ext_resource type="PackedScene" uid="uid://kha3rtcnssdw" path="res://Player/health_component.tscn" id="3_am0pq"]
[ext_resource type="PackedScene" uid="uid://cucy6cmf83ctc" path="res://Player/area_attack.tscn" id="3_eqilm"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_am0pq"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_eqilm"]

[node name="Enemy" type="CharacterBody3D"]
collision_layer = 9
script = ExtResource("1_2pb1h")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_am0pq")

[node name="Rig" parent="." instance=ExtResource("2_px1sc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="Skeleton3D" parent="Rig/CharacterRig/GameRig" index="0"]
bones/0/position = Vector3(1.3991348e-14, 0.9013725, -0.04817353)
bones/2/rotation = Quaternion(0.00093425123, -0.0003710905, 0.0032136969, 0.99999434)
bones/3/rotation = Quaternion(-0.09396405, -0.00034721856, 0.008521699, 0.99553907)
bones/4/rotation = Quaternion(0.2748125, 1.46457975e-08, 9.2886374e-08, 0.9614979)
bones/6/rotation = Quaternion(-0.15900332, -1.176612e-07, -1.9148379e-08, 0.9872781)
bones/7/position = Vector3(-3.5407602e-08, 0.9013724, -0.04817346)
bones/8/position = Vector3(-7.165925e-08, 0.9013724, -0.048173517)
bones/9/position = Vector3(0.13114369, 0.96757656, -0.035129108)
bones/9/rotation = Quaternion(0.99339294, 0.020687595, -0.031036438, 0.10853274)
bones/11/rotation = Quaternion(0.41331625, -0.00069965457, 0.00031771907, 0.91058725)
bones/13/rotation = Quaternion(-0.7486103, 0.01187455, 0.024390426, 0.6624551)
bones/15/position = Vector3(-0.1311437, 0.96757674, -0.035129108)
bones/15/rotation = Quaternion(0.97395545, -0.0056385207, 0.02742192, 0.22500476)
bones/17/rotation = Quaternion(0.4378084, 0.0032535228, -0.0015846236, 0.8990611)
bones/19/rotation = Quaternion(-0.6853704, -0.028177608, -0.00093598606, 0.7276488)
bones/21/position = Vector3(0.025128614, 1.4313685, 0.043990508)
bones/21/rotation = Quaternion(-0.48554045, -0.2612066, -0.40572125, 0.72898006)
bones/22/position = Vector3(0.18953446, 1.4689529, -0.01920785)
bones/22/rotation = Quaternion(0.040306877, -0.16115403, 0.9748834, -0.14834802)
bones/23/rotation = Quaternion(7.682846e-08, -0.02372755, 5.6691682e-08, 0.99971855)
bones/24/rotation = Quaternion(0.31678006, -0.023737974, -0.019604757, 0.9479993)
bones/46/position = Vector3(-0.011363526, 1.4313685, 0.043990493)
bones/46/rotation = Quaternion(-0.4982194, 0.2349431, 0.38798136, 0.7389518)
bones/47/position = Vector3(-0.17077896, 1.4694752, -0.030586075)
bones/47/rotation = Quaternion(-0.05438321, -0.14042512, 0.97459704, 0.16578278)
bones/48/rotation = Quaternion(5.3666582e-08, 0.02774509, 4.93087e-08, 0.9996151)
bones/49/rotation = Quaternion(0.35231593, 0.027746568, 0.02893371, 0.93502223)
bones/71/position = Vector3(0.12719111, 1.3506536, -0.025728669)
bones/71/rotation = Quaternion(1.9644094e-08, 0.60815233, 0.7938204, -4.6234284e-08)
bones/72/position = Vector3(-0.113425955, 1.3506536, -0.025728697)
bones/72/rotation = Quaternion(1.9644148e-08, 0.60815233, 0.7938204, -4.623422e-08)

[node name="Knight_02" parent="Rig/CharacterRig/GameRig/Skeleton3D" index="1"]
visible = false

[node name="Villager_01" parent="Rig/CharacterRig/GameRig/Skeleton3D" index="2"]
visible = true

[node name="RightHandBone" parent="Rig" index="2"]
transform = Transform3D(-0.9623336, -0.2708382, -0.023678757, 0.23489872, -0.8721545, 0.42914954, -0.13688165, 0.40742314, 0.90292275, -0.34460443, 0.9924445, -0.009332977)

[node name="LeftHandBone" parent="Rig" index="3"]
transform = Transform3D(-0.9705162, 0.23910064, 0.030491957, -0.21760067, -0.923525, 0.3158351, 0.10367649, 0.29988793, 0.9483239, 0.34634295, 0.97851986, -0.03449758)

[node name="PlayerDetector" type="ShapeCast3D" parent="Rig"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_eqilm")
target_position = Vector3(0, 0, 1)
collision_mask = 4

[node name="AreaAttack" parent="Rig" instance=ExtResource("3_eqilm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
target_position = Vector3(0, 1, 1)
collision_mask = 4

[node name="HealthComponent" parent="." node_paths=PackedStringArray("body") instance=ExtResource("3_am0pq")]
body = NodePath("..")

[connection signal="heavy_attack" from="Rig" to="." method="_on_rig_heavy_attack"]
[connection signal="defeat" from="HealthComponent" to="." method="_on_health_component_defeat"]

[editable path="Rig"]
[editable path="Rig/CharacterRig"]
